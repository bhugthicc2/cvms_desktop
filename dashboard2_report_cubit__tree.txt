
+--- global
|   +--- global_report_cubit.dart
|   |   import 'package:cvms_desktop/features/dashboard2/models/report/global_report_query.dart';
|   |   import 'package:cvms_desktop/features/dashboard2/models/report/global_vehicle_report_model.dart';
|   |   import 'package:flutter_bloc/flutter_bloc.dart';
|   |   import 'package:cvms_desktop/features/dashboard2/assemblers/report/global_report_assembler.dart';
|   |   import 'package:cvms_desktop/features/dashboard2/models/report/date_range_filter.dart';
|   |   
|   |   part 'global_report_state.dart';
|   |   
|   |   class GlobalReportCubit extends Cubit<GlobalReportState> {
|   |     final GlobalReportAssembler assembler;
|   |   
|   |     GlobalReportCubit(this.assembler) : super(const GlobalReportState.initial());
|   |   
|   |     Future<void> load({required DateRangeFilter range}) async {
|   |       emit(state.copyWith(loading: true));
|   |   
|   |       try {
|   |         final report = await assembler.assemble(
|   |           GlobalReportQuery(start: range.start, end: range.end),
|   |         );
|   |   
|   |         emit(state.copyWith(loading: false, report: report));
|   |       } catch (e) {
|   |         emit(state.copyWith(loading: false, error: e.toString()));
|   |       }
|   |     }
|   |   
|   |     void updateRange(DateRangeFilter range) {
|   |       load(range: range);
|   |     }
|   |   }
|   \--- global_report_state.dart
|       part of 'global_report_cubit.dart';
|       
|       class GlobalReportState {
|         final bool loading;
|         final GlobalVehicleReportModel? report;
|         final String? error;
|       
|         const GlobalReportState({required this.loading, this.report, this.error});
|       
|         const GlobalReportState.initial()
|           : loading = false,
|             report = null,
|             error = null;
|       
|         GlobalReportState copyWith({
|           bool? loading,
|           GlobalVehicleReportModel? report,
|           String? error,
|         }) {
|           return GlobalReportState(
|             loading: loading ?? this.loading,
|             report: report ?? this.report,
|             error: error,
|           );
|         }
|       }
\--- individual
    +--- individual_report_cubit.dart
    |   import 'package:cvms_desktop/features/dashboard2/bloc/report/individual/individual_report_state.dart';
    |   import 'package:flutter_bloc/flutter_bloc.dart';
    |   import 'package:cvms_desktop/features/dashboard2/assemblers/report/individual_report_assembler.dart';
    |   import 'package:cvms_desktop/features/dashboard2/models/report/individual_report_query.dart';
    |   import 'package:cvms_desktop/features/dashboard2/models/report/individual_report_options.dart';
    |   import 'package:cvms_desktop/features/dashboard2/models/report/date_range_filter.dart';
    |   import 'package:cvms_desktop/features/dashboard2/utils/pdf/pdf_branding.dart';
    |   
    |   class IndividualReportCubit extends Cubit<IndividualReportState> {
    |     final IndividualReportAssembler assembler;
    |   
    |     IndividualReportCubit(this.assembler)
    |       : super(const IndividualReportState.initial());
    |   
    |     Future<void> load({
    |       required String vehicleId,
    |       required DateRangeFilter range,
    |     }) async {
    |       emit(state.copyWith(loading: true));
    |   
    |       try {
    |         final report = await assembler.assemble(
    |           IndividualReportQuery(
    |             vehicleId: vehicleId,
    |             start: range.start,
    |             end: range.end,
    |             options: const IndividualReportOptions(
    |               branding: PdfBranding(
    |                 title: 'Vehicle Report',
    |                 department: 'Campus Security',
    |               ),
    |             ),
    |           ),
    |         );
    |   
    |         emit(state.copyWith(loading: false, report: report));
    |       } catch (e) {
    |         emit(state.copyWith(loading: false, error: e.toString()));
    |       }
    |     }
    |   
    |     void updateRange(DateRangeFilter range) {
    |       final current = state.report;
    |       if (current == null) return;
    |   
    |       load(
    |         vehicleId: current.vehicle.vehicleId, // or vehicleId if stored
    |         range: range,
    |       );
    |     }
    |   }
    \--- individual_report_state.dart
        import 'package:cvms_desktop/features/dashboard2/models/report/individual_vehicle_report_model.dart';
        
        class IndividualReportState {
          final bool loading;
          final IndividualVehicleReportModel? report;
          final String? error;
        
          const IndividualReportState({required this.loading, this.report, this.error});
        
          const IndividualReportState.initial()
            : loading = false,
              report = null,
              error = null;
        
          IndividualReportState copyWith({
            bool? loading,
            IndividualVehicleReportModel? report,
            String? error,
          }) {
            return IndividualReportState(
              loading: loading ?? this.loading,
              report: report ?? this.report,
              error: error,
            );
          }
        }
